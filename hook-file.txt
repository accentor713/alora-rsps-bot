::classInstanceTracker:IA:Entity
::classInstanceTracker:SG:NPC
::classInstanceTracker:RG:Player

::setSuper:Player:Entity
::setSuper:NPC:Entity

::addInterface:RG:Player
::addMethod:RG
public String getName() {
	return this.Z(0);
}

::new:interface:Player
public String getName();

::addInterface:IA:Entity
::addMethod:IA
public int getX() {
	return this.x;
}

::addMethod:IA
public int getY() {
	return this.x;
}

::addMethod:IA
public int getHP() {
	return this.M;
}

::addMethod:IA
public int getMaxHP() {
	return this.N;
}

::new:interface:Entity
public int getX();
public int getY();
public int getHP();
public int getMaxHP();



::addInterface:SG:NPC
::addMethod:SG
public String getName() {
	if (this.dI != null) {
		return this.dI.N;
	}
	return "<NO-NPC-DEFINITION>";
}

::addMethod:SG
public String[] getOptions() {
	if (this.dI != null) {
		return this.dI.J;
	}
	return new String[5];
}

::addMethod:SG
public int getCombatLevel() {
	return this.S;
}

::addMethod:SG
public int getId() {
	if (this.dI != null) {
		return this.dI.Y;
	}
	return -1;
}

::addMethod:SG
public void printFields() {
	java.lang.reflect.Field[] fields = IA.class.getDeclaredFields();
	for (int i = 0; i < fields.length; i++) {
		java.lang.reflect.Field field = fields[i];
		if (!java.lang.reflect.Modifier.isStatic(field.getModifiers())) {
			try {
				field.setAccessible(true);
				System.out.println(field.getName() + ": " + field.get(this));
			} catch (IllegalArgumentException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} catch (IllegalAccessException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} catch (ClassCastException e) {
			
			}
		}
	}
}

::addMethod:SG
public int getIndex() {
	for (int i = 0; i < YB.H.length; i++) {
		if (YB.H[i] == this) {
			return i;
		}
	}
	return -1;
}

::addMethod:SG
public void doAction(String action) {
	int i = 0;
	int j = 0;
	int k = (action.equalsIgnoreCase("Attack")) ? 16 : 4; // Examine is 1007
	long l = this.getIndex();
	String str1 = "";//"<col=ffff00>Man<col=00ff00> (level-2)";
	String str2 = action;
	MG.I(i, j, k, l, str1, str2, 297, 244);
}


::new:interface:NPC
public String getName();
public String[] getOptions();
public int getCombatLevel();
public int getId();
public void printFields();
public int getIndex();
public void doAction(String action);

::new:class:Bot

::addMethod:Bot
public static Player getLocalPlayer() {
	return (Player)NS.j;
}

::addMethod:Bot
public static java.util.List getPlayers() {
	return RG.instances;
}

::addMethod:Bot
public static java.util.List getNPCs() {
	return SG.instances;
}

::addMethod:Bot
public static void log(String s) {
	MG.I(null, s, 0);
}

::addMethod:Bot
public static void walkTo(int x, int y) {
	QF.I(NS.j.x, 0, 1, false, 0, NS.j.y, 1, 0, 2, x, y);
}

::addMethod:Bot
public static NPC getNearestNPC(int[] ids) {
	NPC nearest = null;
	float nearestDistance = Float.MAX_VALUE;
	Player localPlayer = Bot.getLocalPlayer();
	java.util.List npcs = Bot.getNPCs();
	for (int i = 0; i < npcs.size(); i++) {
		NPC npc = (NPC)npcs.get(i);
		for (int j = 0; j < ids.length; j++) {
			int id = ids[j];
			if (npc.getId() == id) {
				int dx = npc.getX() - localPlayer.getX();
				int dy = npc.getY() - localPlayer.getY();
				float distance = (float)Math.sqrt((double)(dx*dx + dy*dy));
				if (distance < nearestDistance) {
					nearest = npc;
					nearestDistance = distance;
				}
			}
		}
	}
	return nearest;
}

::addField:Bot
public static java.util.List globalHookMethods = new java.util.ArrayList();

::addField:Bot
private static Thread botThread = null;

::addMethod:Bot
public static void startBot(BotScript bot) {
	Bot.stopBot();
	Bot.botThread = new Thread((Runnable)bot);
	Bot.botThread.start();
}

::addMethod:Bot
public static void stopBot() {
	if (Bot.botThread != null) {
		Bot.botThread.interrupt();
	}
}

::new:interface:BotScript
::setSuper:BotScript:java.lang.Runnable

::new:class:TestBot
::addInterface:TestBot:BotScript
::addField:TestBot
private int[] monsterIds;

::addConstructor:TestBot
public TestBot(String[] args) {
	String[] idStrings = args[1].split(",");
	this.monsterIds = new int[idStrings.length];
	for (int i = 0; i < monsterIds.length; i++) {
		try {
			monsterIds[i] = Integer.parseInt(idStrings[i]);
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
}

::addMethod:TestBot
public void run() {
	while (true) {
		NPC monster = Bot.getNearestNPC(this.monsterIds);
		if (monster != null) {
			monster.doAction("Attack");
		}
		while (monster.getHP() > 0) {
			Thread.sleep(600L);
		}
		Thread.sleep(3000L);
	}
}

/*::insert:NH:I(short,int,long,java.lang.String,int,java.lang.String,int,boolean)
System.out.println($1 + ", " + $2 + ", " + $3 + ", " + $4 + ", " + $5 + ", " + $6 + ", " + $7 + ", " + $8);*/

::insert:MJ:I(java.lang.String):292
if ($1.equals("::npc_ids")) {
	java.util.List npcs = Bot.getNPCs();
	for (int i = 0; i < npcs.size(); i++) {
		NPC npc = (NPC)npcs.get(i);
		Bot.log(npc.getName() + ": " + npc.getId());
	}
}

if ($1.startsWith("::start_bot")) {
	String[] args = $1.split(" ");
	Bot.startBot((BotScript)new TestBot(args));
}
if ($1.equals("::stop_bot")) {
	Bot.stopBot();
}



